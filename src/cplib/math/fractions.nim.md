---
data:
  _extendedDependsOn: []
  _extendedRequiredBy:
  - icon: ':heavy_check_mark:'
    path: cplib/geometry/polygon.nim
    title: cplib/geometry/polygon.nim
  - icon: ':heavy_check_mark:'
    path: cplib/geometry/polygon.nim
    title: cplib/geometry/polygon.nim
  _extendedVerifiedWith:
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_1/ccw_fraction_dgl1c_test.nim
    title: verify/geometry/CGL_1/ccw_fraction_dgl1c_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_1/ccw_fraction_dgl1c_test.nim
    title: verify/geometry/CGL_1/ccw_fraction_dgl1c_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_1/projection_fractions_cgl1a_test.nim
    title: verify/geometry/CGL_1/projection_fractions_cgl1a_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_1/projection_fractions_cgl1a_test.nim
    title: verify/geometry/CGL_1/projection_fractions_cgl1a_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_1/reflection_fractions_cgl1a_test.nim
    title: verify/geometry/CGL_1/reflection_fractions_cgl1a_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_1/reflection_fractions_cgl1a_test.nim
    title: verify/geometry/CGL_1/reflection_fractions_cgl1a_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_2/cross_point_fraction_cgl2c_test.nim
    title: verify/geometry/CGL_2/cross_point_fraction_cgl2c_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_2/cross_point_fraction_cgl2c_test.nim
    title: verify/geometry/CGL_2/cross_point_fraction_cgl2c_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_2/parallel_cgl2a_fraction_test.nim
    title: verify/geometry/CGL_2/parallel_cgl2a_fraction_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_2/parallel_cgl2a_fraction_test.nim
    title: verify/geometry/CGL_2/parallel_cgl2a_fraction_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/area_float_cgl3a_test.nim
    title: verify/geometry/CGL_3/area_float_cgl3a_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/area_float_cgl3a_test.nim
    title: verify/geometry/CGL_3/area_float_cgl3a_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/area_fraction_cgl3a_test.nim
    title: verify/geometry/CGL_3/area_fraction_cgl3a_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/area_fraction_cgl3a_test.nim
    title: verify/geometry/CGL_3/area_fraction_cgl3a_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/area_int_cgl3a_test.nim
    title: verify/geometry/CGL_3/area_int_cgl3a_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/area_int_cgl3a_test.nim
    title: verify/geometry/CGL_3/area_int_cgl3a_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/contains_cgl3c_test.nim
    title: verify/geometry/CGL_3/contains_cgl3c_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/contains_cgl3c_test.nim
    title: verify/geometry/CGL_3/contains_cgl3c_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/isconvex_float_cgl3b_test.nim
    title: verify/geometry/CGL_3/isconvex_float_cgl3b_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/isconvex_float_cgl3b_test.nim
    title: verify/geometry/CGL_3/isconvex_float_cgl3b_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/isconvex_fraction_cgl3b_test.nim
    title: verify/geometry/CGL_3/isconvex_fraction_cgl3b_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/isconvex_fraction_cgl3b_test.nim
    title: verify/geometry/CGL_3/isconvex_fraction_cgl3b_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/isconvex_int_cgl3b_test.nim
    title: verify/geometry/CGL_3/isconvex_int_cgl3b_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_3/isconvex_int_cgl3b_test.nim
    title: verify/geometry/CGL_3/isconvex_int_cgl3b_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_4/convex_hull_cgl4a_test.nim
    title: verify/geometry/CGL_4/convex_hull_cgl4a_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/CGL_4/convex_hull_cgl4a_test.nim
    title: verify/geometry/CGL_4/convex_hull_cgl4a_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/convex_hull_abc286ex_test.nim
    title: verify/geometry/convex_hull_abc286ex_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/geometry/convex_hull_abc286ex_test.nim
    title: verify/geometry/convex_hull_abc286ex_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/math/fractions_abc225e_test.nim
    title: verify/math/fractions_abc225e_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/math/fractions_abc225e_test.nim
    title: verify/math/fractions_abc225e_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/math/fractions_abc226d_test.nim
    title: verify/math/fractions_abc226d_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/math/fractions_abc226d_test.nim
    title: verify/math/fractions_abc226d_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/math/fractions_abc308c_test.nim
    title: verify/math/fractions_abc308c_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/math/fractions_abc308c_test.nim
    title: verify/math/fractions_abc308c_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/math/fractions_unit_test.nim
    title: verify/math/fractions_unit_test.nim
  - icon: ':heavy_check_mark:'
    path: verify/math/fractions_unit_test.nim
    title: verify/math/fractions_unit_test.nim
  _isVerificationFailed: false
  _pathExtension: nim
  _verificationStatusIcon: ':heavy_check_mark:'
  attributes:
    links: []
  bundledCode: "Traceback (most recent call last):\n  File \"/home/runner/.local/lib/python3.10/site-packages/onlinejudge_verify/documentation/build.py\"\
    , line 71, in _render_source_code_stat\n    bundled_code = language.bundle(stat.path,\
    \ basedir=basedir, options={'include_paths': [basedir]}).decode()\n  File \"/home/runner/.local/lib/python3.10/site-packages/onlinejudge_verify/languages/nim.py\"\
    , line 86, in bundle\n    raise NotImplementedError\nNotImplementedError\n"
  code: "when not declared CPLIB_MATH_FRACTIONS:\n    const CPLIB_MATH_FRACTIONS*\
    \ = 1\n    import strformat, std/math, hashes\n    type Fraction*[T] = object\n\
    \        num*, den*: T\n    var FRACTION_REDUCE_LIMIT = 1000000000\n    proc isNaN*(x:\
    \ Fraction): bool = x.den == 0 and x.num == 0\n    proc reduce*[T](self: var Fraction[T])\
    \ =\n        if isNaN(self): return\n        var g = gcd(abs(self.num), abs(self.den))\n\
    \        self.num = self.num div g\n        self.den = self.den div g\n      \
    \  if self.den < 0:\n            self.den *= -1\n            self.num *= -1\n\
    \    proc check_and_reduce[T](self: var Fraction[T]) =\n        if self.den <\
    \ 0 or self.num > FRACTION_REDUCE_LIMIT or self.den > FRACTION_REDUCE_LIMIT: self.reduce()\n\
    \    proc initFraction*[T](num, den: T, reduce: bool = true): Fraction[T] =\n\
    \        result = Fraction[T](num: num, den: den)\n        if reduce: result.reduce()\n\
    \    proc initFraction*[T](num: T): Fraction[T] = Fraction[T](num: num, den: T(1))\n\
    \    converter toFraction*[T](x: T): Fraction[T] = initFraction(x)\n    proc `$`*[T](x:\
    \ Fraction[T]): string =\n        var x = x\n        x.reduce()\n        return\
    \ &\"{x.num}/{x.den}\"\n    proc inv*[T](x: Fraction[T]): Fraction[T] = Fraction[T](num:\
    \ x.den, den: x.num)\n    proc abs*[T](x: Fraction[T]): Fraction[T] = (if x.num\
    \ < 0: Fraction[T](num: -x.num, den: x.den) else: x)\n    proc `-`*[T](x: Fraction[T]):\
    \ Fraction[T] = Fraction[T](num: -x.num, den: x.den)\n    proc `+=`*[T](x: var\
    \ Fraction[T], y: Fraction[T]) =\n        if isNaN(x) or isNaN(y):\n         \
    \   x = initFraction(0, 0)\n            return\n        if x.den == 0 and y.den\
    \ == 0:\n            if (x.num > 0) == (y.num > 0): return\n            x = initFraction(0,\
    \ 0)\n            return\n        if x.den == 0 or y.den == 0:\n            if\
    \ x.den != 0: x = y\n            return\n        x.num = x.num * y.den + y.num\
    \ * x.den\n        x.den *= y.den\n        x.check_and_reduce()\n    proc `-=`*[T](x:\
    \ var Fraction[T], y: Fraction[T]) = x += (-y)\n    proc `*=`*[T](x: var Fraction[T],\
    \ y: Fraction[T]) =\n        if isNaN(x) or isNaN(y):\n            x = initFraction(0,\
    \ 0)\n            return\n        x.den *= y.den\n        x.num *= y.num\n   \
    \     x.check_and_reduce()\n    proc `/=`*[T](x: var Fraction[T], y: Fraction[T])\
    \ =\n        if isNaN(x) or isNaN(y):\n            x = initFraction(0, 0)\n  \
    \          return\n        x.den *= y.num\n        x.num *= y.den\n        x.check_and_reduce()\n\
    \    proc `>`*[T](x, y: Fraction[T]): bool =\n        if isNaN(x) or isNaN(y):\
    \ return false\n        if x.den == 0 and y.den == 0: return x.num > y.num\n \
    \       x.num * y.den > y.num * x.den\n    proc `<`*[T](x, y: Fraction[T]): bool\
    \ =\n        if isNaN(x) or isNaN(y): return false\n        if x.den == 0 and\
    \ y.den == 0: return x.num < y.num\n        x.num * y.den < y.num * x.den\n  \
    \  proc `==`*[T](x, y: Fraction[T]): bool =\n        if isNaN(x) or isNaN(y):\
    \ return false\n        if x.den == 0 and y.den == 0: return (x.num div abs(x.num))\
    \ * (y.num div abs(y.num)) > 0\n        x.num * y.den == y.num * x.den\n    proc\
    \ cmp*[T](x, y: Fraction[T]): int = (if x < y: -1 elif x == y: 0 else: 1)\n\n\
    \    proc `+=`*[T](x: var Fraction[T], y: T) = (x += initFraction[T](y))\n   \
    \ proc `+`*[T](x, y: Fraction[T]): Fraction[T] = (result = x; result += y)\n \
    \   proc `+`*[T](x: Fraction[T], y: T): Fraction[T] = (result = x; result += y)\n\
    \    proc `+`*[T](x: T, y: Fraction[T]): Fraction[T] = (result = y; result +=\
    \ x)\n    proc `-=`*[T](x: var Fraction[T], y: T) = (x -= initFraction[T](y))\n\
    \    proc `-`*[T](x, y: Fraction[T]): Fraction[T] = (result = x; result -= y)\n\
    \    proc `-`*[T](x: Fraction[T], y: T): Fraction[T] = (result = x; result -=\
    \ y)\n    proc `-`*[T](x: T, y: Fraction[T]): Fraction[T] = (result = -y; result\
    \ += x)\n    proc `*=`*[T](x: var Fraction[T], y: T) = (x *= initFraction[T](y))\n\
    \    proc `*`*[T](x, y: Fraction[T]): Fraction[T] = (result = x; result *= y)\n\
    \    proc `*`*[T](x: Fraction[T], y: T): Fraction[T] = (result = x; result *=\
    \ y)\n    proc `*`*[T](x: T, y: Fraction[T]): Fraction[T] = (result = y; result\
    \ *= x)\n    proc `/=`*[T](x: var Fraction[T], y: T) = (x /= initFraction[T](y))\n\
    \    proc `/`*[T](x, y: Fraction[T]): Fraction[T] = (result = x; result /= y)\n\
    \    proc `/`*[T](x: Fraction[T], y: T): Fraction[T] = (result = x; result /=\
    \ y)\n    proc `/`*[T](x: T, y: Fraction[T]): Fraction[T] = (result = y.inv();\
    \ result *= x)\n    proc `>`*[T](x: Fraction[T], y: T): bool = x > initFraction[T](y)\n\
    \    proc `>`*[T](x: T, y: Fraction[T]): bool = initFraction[T](x) > y\n    proc\
    \ `<=`*[T](x: Fraction[T], y: Fraction[T] or T): bool = not (x > y)\n    proc\
    \ `<=`*[T](x: T, y: Fraction[T]): bool = not(x > y)\n    proc `<`*[T](x: Fraction[T],\
    \ y: T): bool = x < initFraction[T](y)\n    proc `<`*[T](x: T, y: Fraction[T]):\
    \ bool = initFraction[T](x) < y\n    proc `>=`*[T](x: Fraction[T], y: Fraction[T]\
    \ or T): bool = not (x < y)\n    proc `>=`*[T](x: T, y: Fraction[T]): bool = not(x\
    \ < y)\n    proc `==`*[T](x: Fraction[T], y: T): bool = x == initFraction[T](y)\n\
    \    proc `==`*[T](x: T, y: Fraction[T]): bool = initFraction[T](x) == y\n   \
    \ proc cmp*[T](x: Fraction[T], y: T): int = cmp(x, initFraction[T](y))\n    proc\
    \ cmp*[T](x: T, y: Fraction[T]): int = cmp(initFraction[T](x), y)\n    proc hash*[T](x:\
    \ Fraction[T]): Hash =\n        var x = x\n        x.reduce()\n        result\
    \ = result !& hash(x.num)\n        result = result !& hash(x.den)\n    proc toFloat*[T](x:\
    \ Fraction[T]): float =\n        x.num / x.den\n    proc pow*[T](x: Fraction[T],\
    \ n: int): Fraction[T] =\n        result = initFraction[T](1)\n        var x =\
    \ x\n        var n = n\n        while n > 0:\n            if (n and 1) == 1: result\
    \ *= x\n            x *= x\n            n = n shr 1\n"
  dependsOn: []
  isVerificationFile: false
  path: cplib/math/fractions.nim
  requiredBy:
  - cplib/geometry/polygon.nim
  - cplib/geometry/polygon.nim
  timestamp: '2024-03-28 19:09:38+09:00'
  verificationStatus: LIBRARY_ALL_AC
  verifiedWith:
  - verify/math/fractions_abc226d_test.nim
  - verify/math/fractions_abc226d_test.nim
  - verify/math/fractions_unit_test.nim
  - verify/math/fractions_unit_test.nim
  - verify/math/fractions_abc225e_test.nim
  - verify/math/fractions_abc225e_test.nim
  - verify/math/fractions_abc308c_test.nim
  - verify/math/fractions_abc308c_test.nim
  - verify/geometry/CGL_2/parallel_cgl2a_fraction_test.nim
  - verify/geometry/CGL_2/parallel_cgl2a_fraction_test.nim
  - verify/geometry/CGL_2/cross_point_fraction_cgl2c_test.nim
  - verify/geometry/CGL_2/cross_point_fraction_cgl2c_test.nim
  - verify/geometry/convex_hull_abc286ex_test.nim
  - verify/geometry/convex_hull_abc286ex_test.nim
  - verify/geometry/CGL_3/isconvex_fraction_cgl3b_test.nim
  - verify/geometry/CGL_3/isconvex_fraction_cgl3b_test.nim
  - verify/geometry/CGL_3/isconvex_int_cgl3b_test.nim
  - verify/geometry/CGL_3/isconvex_int_cgl3b_test.nim
  - verify/geometry/CGL_3/area_float_cgl3a_test.nim
  - verify/geometry/CGL_3/area_float_cgl3a_test.nim
  - verify/geometry/CGL_3/area_fraction_cgl3a_test.nim
  - verify/geometry/CGL_3/area_fraction_cgl3a_test.nim
  - verify/geometry/CGL_3/isconvex_float_cgl3b_test.nim
  - verify/geometry/CGL_3/isconvex_float_cgl3b_test.nim
  - verify/geometry/CGL_3/area_int_cgl3a_test.nim
  - verify/geometry/CGL_3/area_int_cgl3a_test.nim
  - verify/geometry/CGL_3/contains_cgl3c_test.nim
  - verify/geometry/CGL_3/contains_cgl3c_test.nim
  - verify/geometry/CGL_4/convex_hull_cgl4a_test.nim
  - verify/geometry/CGL_4/convex_hull_cgl4a_test.nim
  - verify/geometry/CGL_1/reflection_fractions_cgl1a_test.nim
  - verify/geometry/CGL_1/reflection_fractions_cgl1a_test.nim
  - verify/geometry/CGL_1/ccw_fraction_dgl1c_test.nim
  - verify/geometry/CGL_1/ccw_fraction_dgl1c_test.nim
  - verify/geometry/CGL_1/projection_fractions_cgl1a_test.nim
  - verify/geometry/CGL_1/projection_fractions_cgl1a_test.nim
documentation_of: cplib/math/fractions.nim
layout: document
redirect_from:
- /library/cplib/math/fractions.nim
- /library/cplib/math/fractions.nim.html
title: cplib/math/fractions.nim
---
